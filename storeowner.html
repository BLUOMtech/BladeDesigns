<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Store Owner</title>
<style>
body{font-family:sans-serif;padding:20px;background:#f2f2f2}
input,select{display:block;margin:10px 0;padding:8px;width:100%}
button{padding:10px;background:#222;color:#fff;border:none;border-radius:8px;margin-top:5px}
.card{background:#fff;padding:10px;border-radius:10px;margin:10px 0}
</style>
</head>
<body>

<h2>Owner Panel</h2>

<h3>Add Product</h3>
<input id="title" placeholder="Title">
<input id="price" type="number" placeholder="Price">
<select id="type">
<option value="physical">Physical</option>
<option value="digital">Digital</option>
</select>
<input id="download" placeholder="Download path (digital)">
<input id="image" type="file">
<button onclick="addProduct()">Add</button>

<h3>Orders</h3>
<div id="orders"></div>

<script>
function getProducts(){return JSON.parse(localStorage.getItem("products")||"[]");}
function saveProducts(p){localStorage.setItem("products",JSON.stringify(p));}

function addProduct(){
  const r=new FileReader();
  r.onload=()=>{
    let p=getProducts();
    p.push({
      id:Date.now(),
      title:title.value,
      price:Number(price.value),
      type:type.value,
      image:r.result,
      download:download.value
    });
    saveProducts(p);
    alert("Added!");
  };
  r.readAsDataURL(image.files[0]);
}

function renderOrders(){
  const orders=JSON.parse(localStorage.getItem("orders")||"[]");
  let html="";
  orders.forEach((o,i)=>{
    html+=`
    <div class="card">
      <b>${o.ref}</b><br>
      Paid: ${o.paid}<br>
      <button onclick="markPaid(${i})">Mark Paid</button>
    </div>`;
  });
  document.getElementById("orders").innerHTML=html;
}

function markPaid(i){
  let orders=JSON.parse(localStorage.getItem("orders")||"[]");
  orders[i].paid=true;
  localStorage.setItem("orders",JSON.stringify(orders));
  renderOrders();
}

renderOrders();
</script>
</body>
</html>
